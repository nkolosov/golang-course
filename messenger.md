# gRPC чат

## Краткое описание
Разработка сервиса для реализации простого мессенджера, в котором пользователи имеют возможность создать групповые чаты и далее вести там переписку.

## Бизнес-требования

### Запуск сервера
При запуске сервера можно указать порт, по которому он будет доступен

Можно указать максимально возможное количество чатов. Можно указать максимальный размер одного чата и максимальное число пользователей. Если число активных чатов или пользователей достигло лимита, пользователями возвращается ошибка при соответствующих действиях. 

Указывается время жизни неактивной пользовательской сессии.

### Пользователь

Пользователи могут создавать собственную сессию. При создании сессии указывается отображаемое имя пользователя. При создании сессии Пользователю выдаётся уникальный UUID. Сессия удаляется через Х минут после последнего сообщения (если пользователь не является создателем чата), либо через  Х минут после закрытия последнего чата, созданного пользователем. 

Пользователи могут создавать чат. При создании чата можно ограничить количество хранимых в нем сообщений (старые сообщения должны удаляться), можно сделать чат "только для чтения", тогда писать в него может только создатель. Можно указать время жизни чата (он будет автоматически удален спустя заданное время). При этом к чатам также должны применяться настройки сервера.

Пользователь может получить список активных чатов (С указанием создателя, времени создания, количеством сообщений, TTL, активных пользователях, дате последнего сообщения)

Пользователь могут добавлять новые сообщения в ча (по UUID чата)  если это возможно.

Пользователи могут получить все сообщения из чата с постраничной навигацией. Либо получить все сообщениях с момента последнего запроса (непрочитанные).

Отдельным запросом можно получить статистику сервера (Число пользователей, число чатов, число сообщений, число сообщений за последний час)


### Прочие требования
* У сервиса должна быть возможность изменить тип сторалжа (In-Memory, Redis, PostgreSQL)
* Сервис должен иметь HTTP и gRPC API
* У сервиса должен быть Health Check API
* У сервиса должен быть реализован Graceful Shutdown 
* Сервис должен собирать и отдавать все необходимые метрики
* У сервиса должен быть подключен линтер, docker-compose, Makefile 
* Сервис должен быть покрыт тестами

## Пошаговый план выполнения
* Завести шаблон структуры проекта 
* Спроектировать .proto для всех requests/response
* Сгенерировать сервер при помощи protoc-gen
* Реализовать in-memory сторалжа для пользователей и сообщений
* Реализовать запуск приложения, чтение конфигурации, инициализацию, завершение работы.
* Реализовать логику gRPC методов
* Реализовать другие типы стораджей, добавить миграции
* Описать OpenAPI спецификации, создать код при помощи oapi-codegen, отписать бизнес-логику